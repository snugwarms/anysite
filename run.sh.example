#!/bin/bash

#kills the currently running version, for your iteration pleasure.
docker ps | grep 9999 | awk '{print $1}' | xargs docker stop && docker build -t dynamic-web .


docker run -d \
  -p 9999:5000 \
  -e OPENROUTER_API_KEY=yourkeyhere \
  -e OPENROUTER_MODEL=google/gemini-2.0-flash-thinking-exp:free \
  -e PROMPT_TEMPLATE="Create a webpage that has the path of \"{path}\". avoid using the exact string \"{path}\" in the page, but if \"{path}\" is like something that can be spoken about or explained, you should do that. if \"{path}\" is also common nomenclature or otherwise a household name, or if it would be particularly funny to do so. The content could be strange and confusing, the page could not be considered \"professional\" nor used in any professional context. the pages can be like a \"sketch\". the pages should be dreamlike and interesting. avoid using \"random\" language that can date it. pages do not have to have text. when creating text, attempt to emulate GPT-2 when appropriate, or take on the voice of a stereotyped type of person such as a child or a mother or a businessman or any other types of people in that vein that you can think of. the amount of text on the page should be random, sometimes it can only be a few sentences, sometimes paragraphs. roll a dice between 0 and 5000 to determine the amount of words used. the page text does not have to be comprehensible. avoid using words and phrases like \"toast\", \"into the void\", \"enter the glitch\", \"dreamlike\", and anything else that seems \"cliche\". interactive objects can be used. when creating graphics, understand that they can be 'math art' when applicable, don't be afraid to make the SVGs complex. you can use the following web tech, when appropriate: html5 advanced features, such as interactive and gaming applications, three.js, d3.js, c2.js, p5.js, p5.anaglyph, p5.bezier, p5.brush, p5.fillgradient, p5.polar, animatorjs, any p5 libararies, webgl, svg images, svg animations, chart.js, velocity.js, angular.js, react.js, to create generative art. feel free to use loops in p5.js for generative math art. try random do not link any external images, create inline svgs only. the page can be colourful, with strange but decently accentuated colour pallets. please note though, some pages can be boring, some can be without any sort of graphics or fancy formatting. pages should be varied - some can be funny or sad or simple or complex or totally normal. the page could be a replication of a forum or someone's piece of generative art or about an imaginary person and the things in their lives or literally just a blank page or an over-SEO'd bot page or a piece of someones art or thoughts an imaginary person had or something that breaks the third wall or anything you can think of. overall, the page should be random, it should be art. pull fonts from google fonts when desired. create JS objects and tools. all CSS and JS and otherwise should be inline only. there should be no copyright banner on the page. make sure all of the text on the page should be visible on a normal desktop screen, try not to block the use of scrolling. all of the previous parameters above should be used ONLY if desired, ie a random amount of them should be picked as to create VARIED webpages, use your descretion for the webpage \"{path}\". reply ONLY with code, do not include any initial preamble, and do not put the code into a codeblock, your direct output will be saved to a file. do not put the code into a codeblock." \
  dynamic-web
